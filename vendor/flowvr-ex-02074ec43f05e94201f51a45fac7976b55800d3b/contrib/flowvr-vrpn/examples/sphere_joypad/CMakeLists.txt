PROJECT(sphere_joypad)

SET(PROJECT_VERSION_MAJOR "1")
SET(PROJECT_VERSION_MINOR "0")
SET(PROJECT_VERSION_PATCH "0")
SET(PROJECT_VERSION "${PROJECT_VERSION_MAJOR}.${PROJECT_VERSION_MINOR}.${PROJECT_VERSION_PATCH}")


# CMAKE SETTINGS

#Require cmake 2.8 at least
IF(DEFINED CMAKE_PATCH_VERSION)
  CMAKE_MINIMUM_REQUIRED(VERSION "2.8" FATAL_ERROR)
ELSE(DEFINED CMAKE_PATCH_VERSION)
  MESSAGE(FATAL_ERROR "Your version of CMake is too old, please use at least cmake 2.6")
ENDIF(DEFINED CMAKE_PATCH_VERSION)



SET(app sphere_joypad)


# INSTALLATION DIRECTORIES

SET(INCLUDE_DIR include)
SET(LIB_DIR lib)
SET(BIN_DIR bin)
SET(MODULE_DIR bin)
SET(CMAKE_DIR cmake)
SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} $ENV{FlowVRVRPN_DIR})


FIND_PACKAGE(FlowVR REQUIRED)
IF(FLOWVR_FOUND)
 MESSAGE(STATUS "FlowVR Found")
ELSE(FLOWVR_FOUND)
 MESSAGE(FATAL_ERROR "Error:  FlowVR Not Found")
ENDIF(FLOWVR_FOUND)


FIND_PACKAGE(OpenGL REQUIRED)
IF (OPENGL_FOUND) 
   MESSAGE(STATUS  "OpenGL Found")
ELSE (OPENGL_FOUND) 
   MESSAGE(FATAL_ERROR "OpenGL Not Found (required to compile modules)")
ENDIF (OPENGL_FOUND) 

FIND_PACKAGE(GLUT REQUIRED)
IF (GLUT_FOUND) 
   MESSAGE(STATUS  "GLUT Found")
ELSE (GLUT_FOUND) 
   MESSAGE(FATAL_ERROR  "GLUT Not Found (required to compile modules)")
ENDIF (GLUT_FOUND) 

FIND_PACKAGE(VRPN REQUIRED)
IF (VRPN_FOUND)
  MESSAGE(STATUS "VRPN Found")
ELSE (VRPN_FOUND)
  MESSAGE(FATAL_ERROR "VRPN Not Found (required to compile modules)")
ENDIF (VRPN_FOUND)

FIND_FILE(SIMULATED_INSTALLED NAMES simulateddevice
  PATH
  ENV FLOWVR_PREFIX/share/flowvr-vrpn/modules/bin
  )

# Configuration Files 

CONFIGURE_FILE(${app}-config.sh.in ${app}-config.sh @ONLY)

INSTALL(PROGRAMS ${CMAKE_BINARY_DIR}/${app}-config.sh DESTINATION ${BIN_DIR})

ADD_SUBDIRECTORY(src)


