.vars:
  - &int_scalar_var
    type: int
    group: "scalar_group"
    attributes:
      scalar_attr: $scalar_attr
  - &int_array_var
    type: array
    subtype: int
    size: 32
    group: "array_group"
    dimensions: ["time"]
    attributes:
      array_attr: $array_attr
.groups:
  - &scalar_group_value
    attributes:
      scalar_group_attr: $scalar_group_attr
  - &array_group_value
    attributes:
      array_group_attr: $array_group_attr

logging: trace
metadata:
  input: int
  group_attr: int
  scalar_attr: int
  array_attr: {type: array, subtype: int, size: 4}
  scalar_group_attr: int
  array_group_attr: {type: array, subtype: int, size: 4}
data:
  int_scalar: int
  int_array: {type: array, subtype: int, size: 32}
plugins:
  decl_netcdf:
    - file: "test_03.nc"
      variables:
        int_scalar: *int_scalar_var
        int_array: *int_array_var
      groups:
        scalar_group: *scalar_group_value
        array_group: *array_group_value
      when: "${input}=0"
      write: [int_scalar, int_array]
    - file: "test_03.nc"
      variables:
        int_scalar: *int_scalar_var
        int_array: *int_array_var
      groups:
        scalar_group: *scalar_group_value
        array_group: *array_group_value
      when: "${input}=1"
      read: [int_scalar, int_array]
