metadata:
  input: int
data:
  array_of_record:
    type: array
    size: 4
    subtype:
      type: record
      buffersize: 68
      members:
        id:
          type: int
          disp: 0
        value:
          disp: 4
          type: array
          subtype: int
          size: [4, 4]
  array_of_record_read:
    type: array
    size: 2
    subtype:
      type: record
      buffersize: 20
      members:
        id:
          type: int
          disp: 0
        value:
          disp: 4
          type: array
          subtype: int
          size: [4, 4]
plugins:
  decl_hdf5:
    - file: test_09.h5
      when: $input=0
      datasets:
        data_array:
          type: array
          size: 2
          subtype:
            type: record
            buffersize: 20
            members:
              id:
                type: int
                disp: 0
              value:
                disp: 4
                type: array
                subtype: int
                size: [4, 4]
      write: 
        array_of_record:
          dataset: data_array
          memory_selection:
            size: 2
            start: 1
          dataset_selection:
            size: 2
    - file: test_09.h5
      when: $input=1
      read: [array_of_record_read]

