metadata:
  input: int
  ni: int
  nj: int
  nig: int
  njg: int
  nit: int
  njt: int
  istart: int
  jstart: int
  rank: int
  nproc: int
data:
  myrank: int
  reals: 
    type: double
    sizes: [$nj +2*$njg , $ni+2*$nig]
    subsizes: [$nj , $ni]
    starts: [$njg, $nig]
    global_sizes: [$njt, $nit]
    global_starts: [$jstart, $istart]
  values: 
    type: int
    sizes: [$nj +2*$njg , $ni+2*$nig]
    subsizes: [$nj , $ni]
    starts: [$njg, $nig]
    global_sizes: [$njt, $nit]
    global_starts: [$jstart, $istart]
plugins:
  mpi:
  decl_hdf5:
    - file: decl_hdf5_test_06_C_r${rank}.h5
      write:
        myrank: {when: $input=0}
      read:
        myrank: {when: $input=1}
    - file: decl_hdf5_test_06_C.h5
      communicator: $MPI_COMM_WORLD
      datasets:
        reals: {type: double, sizes: [$njt, $nit]}
        values: {type: int, sizes: [$njt, $nit]}
      write:
        reals:
          when: $input=0
          dataset_selection: {start: [$jstart, $istart]}
        values:
          when: $input=0
          dataset_selection: {start: [$jstart, $istart]}
      read:
        reals:
          when: $input=1
          dataset_selection: {start: [$jstart, $istart]}
        values:
          when: $input=1
          dataset_selection: {start: [$jstart, $istart]}
